<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Teo's Portfolio - Senior Front-End Engineer"
    />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <title>Teo's Portfolio</title>

    <!-- Preconnect to CDNs -->
    <link rel="preconnect" href="https://esm.sh" />
    <% if (!isProduction) { %>
    <link rel="preconnect" href="http://localhost:9001" />
    <link rel="preconnect" href="http://localhost:9002" />
    <link rel="preconnect" href="http://localhost:9003" />
    <% } else { %>
    <link rel="preconnect" href="<%= cdnBaseUrl %>" />
    <% } %>

    <!-- Native Import Map -->
    <script type="importmap">
      {
        "imports": {
          "react": "https://esm.sh/react@18.2.0",
          "react-dom": "https://esm.sh/react-dom@18.2.0",
          "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
          "react/jsx-runtime": "https://esm.sh/react@18.2.0/jsx-runtime",
          "react/jsx-dev-runtime": "https://esm.sh/react@18.2.0/jsx-dev-runtime",
          "single-spa": "https://esm.sh/single-spa@6.0.1",
          "single-spa-react": "https://esm.sh/single-spa-react@6.0.1?external=react",
          "zustand": "https://esm.sh/zustand@4.5.0?external=react",
          "framer-motion": "https://esm.sh/framer-motion@11.0.0?external=react",
          "lucide-react": "https://esm.sh/lucide-react@0.330.0?external=react",
          "clsx": "https://esm.sh/clsx@2.1.0",
          "class-variance-authority": "https://esm.sh/class-variance-authority@0.7.0?external=clsx",
          "tailwind-merge": "https://esm.sh/tailwind-merge@2.2.0",
          "@portfolio/navbar": "<%= mfeUrls.navbar %>",
          "@portfolio/main-content": "<%= mfeUrls.mainContent %>",
          "@portfolio/shared": "<%= mfeUrls.shared %>"
        }
      }
    </script>

      <!-- Import Map Overrides - Development only -->
      <script
        type="text/javascript"
        src="https://cdn.jsdelivr.net/npm/import-map-overrides/dist/import-map-overrides.js"
      ></script>
      <import-map-overrides-full
        show-when-local-storage="devtools"
      ></import-map-overrides-full>

    <style>
      /* CSS Custom Properties for theming (shadcn-ui compatible) */
      :root {
        --background: 0 0% 100%;
        --foreground: 222.2 84% 4.9%;
        --card: 0 0% 100%;
        --card-foreground: 222.2 84% 4.9%;
        --popover: 0 0% 100%;
        --popover-foreground: 222.2 84% 4.9%;
        --primary: 222.2 47.4% 11.2%;
        --primary-foreground: 210 40% 98%;
        --secondary: 210 40% 96.1%;
        --secondary-foreground: 222.2 47.4% 11.2%;
        --muted: 210 40% 96.1%;
        --muted-foreground: 215.4 16.3% 46.9%;
        --accent: 210 40% 96.1%;
        --accent-foreground: 222.2 47.4% 11.2%;
        --destructive: 0 84.2% 60.2%;
        --destructive-foreground: 210 40% 98%;
        --border: 214.3 31.8% 91.4%;
        --input: 214.3 31.8% 91.4%;
        --ring: 222.2 84% 4.9%;
        --radius: 0.5rem;
      }

      .dark {
        --background: 222.2 84% 4.9%;
        --foreground: 210 40% 98%;
        --card: 222.2 84% 4.9%;
        --card-foreground: 210 40% 98%;
        --popover: 222.2 84% 4.9%;
        --popover-foreground: 210 40% 98%;
        --primary: 210 40% 98%;
        --primary-foreground: 222.2 47.4% 11.2%;
        --secondary: 217.2 32.6% 17.5%;
        --secondary-foreground: 210 40% 98%;
        --muted: 217.2 32.6% 17.5%;
        --muted-foreground: 215 20.2% 65.1%;
        --accent: 217.2 32.6% 17.5%;
        --accent-foreground: 210 40% 98%;
        --destructive: 0 62.8% 30.6%;
        --destructive-foreground: 210 40% 98%;
        --border: 217.2 32.6% 17.5%;
        --input: 217.2 32.6% 17.5%;
        --ring: 212.7 26.8% 83.9%;
      }

      * {
        border-color: hsl(var(--border));
      }

      body {
        background-color: hsl(var(--background));
        color: hsl(var(--foreground));
        font-family:
          system-ui,
          -apple-system,
          BlinkMacSystemFont,
          "Segoe UI",
          Roboto,
          sans-serif;
        margin: 0;
        padding: 0;
        min-height: 100vh;
        transition:
          background-color 0.3s ease,
          color 0.3s ease;
      }

      /* Layout for micro-frontends */
      #navbar-container {
        position: fixed;
        left: 0;
        top: 0;
        width: 280px;
        height: 100vh;
        z-index: 50;
      }

      #main-content-container {
        margin-left: 280px;
        min-height: 100vh;
      }

      @media (max-width: 768px) {
        #navbar-container {
          width: 100%;
          height: auto;
          position: relative;
        }

        #main-content-container {
          margin-left: 0;
        }
      }
    </style>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this portfolio.</noscript>

    <!-- Container for navbar micro-frontend -->
    <div id="navbar-container"></div>

    <!-- Container for main-content micro-frontend -->
    <main id="main-content-container"></main>

    <!-- Bootstrap single-spa with native ES modules -->
    <script type="module" src="<%= mfeUrls.rootConfig %>"></script>
  </body>
</html>
